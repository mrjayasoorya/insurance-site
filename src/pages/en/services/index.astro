---
import DesktopHero from "../../../components/DesktopHero.astro";
import MobileHero from "../../../components/MobileHero.astro";
import FooterCtaBar from "../../../components/FooterCtaBar.astro";
import FloatingContactCta from "src/components/FloatingContactCta.astro";
import { siteData, EN } from "../../../content/siteData";
import FloatingMenu from "src/components/FloatingMenu.astro";
import BacklinksRow from "src/components/BacklinksRow.astro";
import { buildJsonLd, buildMeta, canonicalFromPath } from "../../../lib/seo";
import QuickHelpLinks from "src/components/QuickHelpLinks.astro";

const canonical = canonicalFromPath(siteData.brand.websiteUrl, "/en/services/");
const meta = buildMeta({
  title: `Services | ${siteData.brand.name}`,
  description:
    "Insurance services for commercial, transport, industrial and claim support across Chennai and industrial corridors.",
  canonical,
  // ogType: "website",
});

const jsonLd = buildJsonLd({
  pageType: "servicesHub",
  siteData,
  canonical,
  title: meta.title,
  description: meta.description,
  breadcrumbs: [
    { name: "Home", href: canonicalFromPath(siteData.brand.websiteUrl, "/en/") },
    { name: "Services", href: canonical },
  ],
  // Keep schema tight here (optional)
  faqs: siteData.faqsPage?.locationsOffice?.items?.slice(0, 4) || [],
});
---

<html lang="en">
  <head>

    <title>{meta.title}</title>
  <meta name="description" content={meta.description} />
  <link rel="canonical" href={meta.canonical} />
  {Object.entries(meta.tags).map(([k,v]) => <meta property={k} content={v} />)}
  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />



    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="/styles/theme.css" />

   
  </head>

  <body>
    <main class="app">
      <div class="container">
        {/* DESKTOP */}
        <div class="ui-desktop">
          <header>
            <DesktopHero
              brand={{
                name: siteData.brand.name,
                tagline: siteData.brand.tagline,
                subtitle:
                  "Insurance guidance for commercial, vehicle and industrial risks — built around documentation and claim readiness (not just premium).",
                phone: siteData.brand.phone,
                areaChips: siteData.brand.areaChips,
              }}
            />
          </header>

          {/* SECTION 1: Overview */}
          <section
            class="section section-padding"
            aria-label="Service overview"
          >
            <h1 class="section-title">
              Insurance Services for Commercial, Vehicle & Industrial Risks
            </h1>
            <p class="section-sub readable">
              For businesses, transport operators and families across
              Sholavaram, Red Hills, Madhavaram and Chennai outskirts. We focus
              on coverage clarity + documentation habits that prevent claim
              delays later.
            </p>
          </section>

          {/* SECTION 2: Popular services (area-driven) */}
          <section
            class="section section-padding"
            aria-label="Most requested services"
          >
            <h2 class="section-title">
              Most Requested Insurance Services Around Red Hills & Sholavaram
            </h2>
            <div class="grid grid-2">
              {
                siteData.servicePopular?.slice(0, 8).map((x) => (
                  <a class="card" href={x.href}>
                    <div class="card-row">
                      <span class="chip">{x.tag}</span>
                    </div>
                    <h3 class="card-title">{x.title}</h3>
                    <p class="card-desc">Open guidance</p>
                  </a>
                ))
              }
            </div>
          </section>

          {/* SECTION 3: Categories (authority layer) */}
          <section
            class="section section-padding"
            aria-label="Service categories"
          >
            <h2 class="section-title">Insurance Categories We Specialize In</h2>
            <div class="grid grid-2">
              {
                siteData.serviceCategories?.map((c) => (
                  <a class="card" href={c.href}>
                    <h3 class="card-title">{c.title}</h3>
                    <p class="card-desc readable">{c.desc}</p>
                  </a>
                ))
              }
            </div>
          </section>

          {/* SECTION 4: Vehicle type */}
          <section
            class="section section-padding"
            aria-label="Vehicle based services"
          >
            <h2 class="section-title">Vehicle-Based Insurance Services</h2>
            <div class="chips">
              {
                siteData.serviceVehicleTypes?.map((x) => (
                  <a class="chiplink" href={x.href}>
                    {x.label}
                  </a>
                ))
              }
            </div>
          </section>

          {/* SECTION 5: Areas (from Locations Index) */}
          <section
            class="section section-padding"
            aria-label="Areas we commonly serve"
          >
            <h2 class="section-title">Areas We Commonly Serve</h2>
            <p class="section-sub readable">
              Browse location pages for local context and the services commonly
              supported there.
            </p>

            <div class="grid grid-2">
              {
                siteData.locationsIndex?.groups
                  ?.flatMap((g) => g.locations || [])
                  .slice(0, 12)
                  .map((loc) => (
                    <a class="card" href={EN(`/locations/${loc.slug}/`)}>
                      <h3 class="card-title">{loc.name}</h3>
                      <p class="card-desc">Open local service guide</p>
                    </a>
                  ))
              }
            </div>

            <p class="section-sub" style="margin-top:12px">
              <a class="chiplink" href={EN("/locations/")}>View all locations</a
              >
            </p>
          </section>

          <BacklinksRow
            title={siteData.backlinks.title}
            links={siteData.backlinks.links}
          />
          <QuickHelpLinks pageType="services" />

          <section aria-label="Contact CTA">
            <FooterCtaBar
              title={siteData.footerCtas.title}
              subtitle={siteData.footerCtas.subtitle}
              whatsappNumber={siteData.brand.whatsappE164}
              whatsappText={siteData.brand.whatsappPrefill}
              callNumber={siteData.brand.phoneE164}
              callLabel={siteData.footerCtas.callLabel}
              brandName={siteData.footerCtas.brandName}
              logoText={siteData.footerCtas.logoText}
              copyright={siteData.footerCtas.copyright}
            />
          </section>
        </div>

        {/* MOBILE */}
        <div class="ui-mobile">
          <header>
            <MobileHero
              brand={{
                name: siteData.brand.name,
                tagline: siteData.brand.tagline,
                subtitle:
                  "Commercial, vehicle and industrial insurance guidance—built around documentation and claim readiness.",
                phone: siteData.brand.phone,
                areaChips: [],
              }}
            />
          </header>

          <section class="section section-padding">
            <h1 class="section-title">Insurance Services</h1>
            <p class="section-sub readable">
              Commercial-first guidance for NH + industrial belts (Sholavaram,
              Red Hills, Madhavaram).
            </p>
          </section>

          <section class="section section-padding">
            <h2 class="section-title">Most Requested Services</h2>
            <div class="grid grid-1">
              {
                siteData.servicePopular?.slice(0, 8).map((x) => (
                  <a class="card" href={x.href}>
                    <div class="card-row">
                      <span class="chip">{x.tag}</span>
                    </div>
                    <h3 class="card-title">{x.title}</h3>
                    <p class="card-desc">Open guidance</p>
                  </a>
                ))
              }
            </div>
          </section>

          <section class="section section-padding">
            <h2 class="section-title">Categories</h2>
            <div class="grid grid-1">
              {
                siteData.serviceCategories?.map((c) => (
                  <a class="card" href={c.href}>
                    <h3 class="card-title">{c.title}</h3>
                    <p class="card-desc readable">{c.desc}</p>
                  </a>
                ))
              }
            </div>
          </section>

          <section class="section section-padding">
            <h2 class="section-title">Vehicle Types</h2>
            <div class="chips">
              {
                siteData.serviceVehicleTypes?.map((x) => (
                  <a class="chiplink" href={x.href}>
                    {x.label}
                  </a>
                ))
              }
            </div>
          </section>

          {/* SECTION 5: Areas (from Locations Index) */}
          <section
            class="section section-padding"
            aria-label="Areas we commonly serve"
          >
            <h2 class="section-title">Areas We Commonly Serve</h2>
            <p class="section-sub readable">
              Browse location pages for local context and the services commonly
              supported there.
            </p>

            <div class="grid grid-2">
              {
                siteData.locationsIndex?.groups
                  ?.flatMap((g) => g.locations || [])
                  .slice(0, 12)
                  .map((loc) => (
                    <a class="card" href={EN(`/locations/${loc.slug}/`)}>
                      <h3 class="card-title">{loc.name}</h3>
                      <p class="card-desc">Open local service guide</p>
                    </a>
                  ))
              }
            </div>

            <p class="section-sub" style="margin-top:12px">
              <a class="chiplink" href={EN("/locations/")}>View all locations</a
              >
            </p>
          </section>

          <BacklinksRow
            title={siteData.backlinks.title}
            links={siteData.backlinks.links}
          />
          <QuickHelpLinks pageType="services" />
          <section aria-label="Contact CTA">
            <FooterCtaBar
              title={siteData.footerCtas.title}
              subtitle={siteData.footerCtas.subtitle}
              whatsappNumber={siteData.brand.whatsappE164}
              whatsappText={siteData.brand.whatsappPrefill}
              callNumber={siteData.brand.phoneE164}
              callLabel={siteData.footerCtas.callLabel}
              brandName={siteData.footerCtas.brandName}
              logoText={siteData.footerCtas.logoText}
              copyright={siteData.footerCtas.copyright}
            />
          </section>
        </div>
      </div>
    </main>

    <FloatingMenu />
    <FloatingContactCta brand={siteData.brand} />

    <style>
      .grid {
        display: grid;
        gap: 12px;
      }
      .grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid-1 {
        grid-template-columns: 1fr;
      }
      .card {
        display: block;
        padding: 14px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 14px;
        text-decoration: none;
      }
      .card-title {
        font-size: 16px;
        margin: 8px 0 6px;
      }
      .card-desc {
        margin: 0;
        opacity: 0.85;
      }
      .readable {
        max-width: 78ch;
      }
      .chip {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        font-size: 12px;
        opacity: 0.9;
      }
      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      .chiplink {
        display: inline-flex;
        align-items: center;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        text-decoration: none;
      }
      .card-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      @media (max-width: 980px) {
        .grid-2 {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </body>
</html>
